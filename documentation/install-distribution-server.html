---
layout: documentation
title: Quick Start - OSX
slug: documentation
side_nav: install-distribution-server
base_url: "/"
---

<div class="container" id="content">
	<h1>MacPatch - Install Distribution Server(s)</h1>

	<p>When the first server ("Master") is compiled and built it will create a file called "MacPatch_Server.zip" in /Library/MacPatch. This zip file is a complete copy of the master server build in a unconfigured state. Simply copy the "MacPatch_Server.zip" to your new distribution server.</p>

	<h4>Mac OS X Requirements</h4>

	<p>Java JDK needs to be installed.</p>

	<h4>Linux Requirements</h4>

	<h5>APT</h5>

	<pre><code>sudo apt-get update
sudo apt-get install git
sudo apt-get install build-essential
sudo apt-get install openjdk-7-jdk
sudo apt-get install zip
sudo apt-get install libssl-dev
sudo apt-get install libxml2-dev
sudo apt-get install python-pip
sudo apt-get install python-mysql.connector 
	</code></pre>

	<h5>YUM</h5>

	<pre><code>sudo yum install gcc-c++
sudo yum install openssl-devel
sudo java-1.7.0-openjdk-devel
sudo yum install libxml2-devel
sudo yum install bzip2
sudo yum install bzip2-libs
sudo yum install bzip2-devel
sudo yum install python-pip
sudo yum install mysql-connector-python
	</code></pre>

	<h5>Python</h5>

	<pre><code>pip install requests
pip install python-crontab
	</code></pre>

	<h2>Configure Server</h2>

	<h5>Distribution Server Setup &amp; Config</h5>

	<pre><code>mkdir -p /Library/MacPatch
cp {FROM_PATH}/MacPatch_Server.zip /Library/MacPatch
cd /Library/MacPatch
unzip ./MacPatch_Server.zip
mv ./MacPatch_Server ./Server
	</code></pre>

	<h5>Run Setup Scripts</h5>

	<pre><code>cd /Library/MacPatch/Server 
./conf/scripts/Setup/DataBaseLDAPSetup.sh
./conf/scripts/Setup/WebServicesSetup.sh
	</code></pre>

	<p>This distribution server is now configured and running. The last step is to edit the Apache virtual host balancer to include the new distribution server.</p>

	<h5>Configure "Master" MacPatch server</h5>

	<p>Using your favorite editor edit the following file "/Library/MacPatch/Server/Apache2/conf/extra/httpd-vhosts.conf". You will want to edit the Virtual host "*:2600" (<VirtualHost *:2600>).</p>

	<p>Find and edit the lines:</p>

	<pre><code>#WslBalanceStart
BalancerMember http://localhost:3601 route=localhost-site1 loadfactor=50
#WslBalanceStop  
	</code></pre>

	<p>Add the line below the first "<strong>BalancerMember</strong>"</p>

	<pre><code>BalancerMember http://[YOUR_SERVER_NAME_OR_IP]:3601 route=[YOUR_SERVER_NAME]-site1 loadfactor=50
	</code></pre>

	<p>Add the server(s) via the Admin console</p>

	<p>Login to the MacPatch admin console with a admin account and go to "Admin->Server->MacPatch Server" and add the new server.</p>

	<h5>Start the MacPatch services</h5>

	<pre><code>/Library/MacPatch/Server/conf/scripts/Setup/StartServices.py --load All
	</code></pre>

</div>