---
layout: documentation
title: Vagrant
slug: documentation
side_nav: vagrant
base_url: "/"
---

<div class="container-fluid" id="content">
    <h1>Run MacPatch with Vagrant</h1>

    <p>Use this Vagrant file to build and configure a MacPatch server on Ubuntu in a VirtualBox. This is not for production environments, but is helpful when evaluating MacPatch.</p>

    <p>Vagrant official website: <a href="https://www.vagrantup.com">https://www.vagrantup.com</a></p>

    <h2>Setup</h2>

    <ol>
        <li>Install [Vagrant](https://docs.vagrantup.com/v2/installation/) and [VirtualBox](https://www.virtualbox.org/wiki/Downloads)</li>
        <li>Clone this repo <code>git clone https://github.com/SMSG-MAC-DEV/MacPatch-Vagrant.git</code></li>
        <li><code>cd</code> into the project directory</li>
        <li>Start the VM by running <code>vagrant up</code>li>
    </ol>

    <h2>Possible issues with an SSL proxy</h2>

    <p>If your are behind an SSL proxy you may encounter errors during the setup and build process. Below are workarounds that I'm aware of.</p>

    <h3>Vagrant</h3>
    <p>Vagrant may run into certificate errors when attempting to download boxes. In some cases adding <code>--insecure</code> to the command is enough, but in some case you may need to download and add the box manually.</p>

    <pre><code>cd /tmp/
curl -O --insecure https://cloud-images.ubuntu.com/vagrant/trusty/current/trusty-server-cloudimg-amd64-vagrant-disk1.box
vagrant box add "ubuntu/trusty64" /tmp/trusty-server-cloudimg-amd64-vagrant-disk1.box
rm /tmp/trusty-server-cloudimg-amd64-vagrant-disk1.box
    </pre></code>

    <h3>PIP</h3>
    <p>You may see certificate errors from pip commands in the bootstrap.sh provisioning script. To workaround this, copy your site's certificate into the project directory. Then modify the file <code>bootstrap-scrips/bootstrap.sh</code> and add <code>cert /vagrant/mycert.crt</code> to the pip commands.</p>


    <h3>Github</h3>
    <p>If git complains about certificates, open <code>bootstrap-scrips/bootstrap.sh</code> and uncomment the following line; <code>git config --global http.sslverify false</code></p>


    <h2>Other possible issues</h2>

    <h3>VirtualBox DHCP error</h3>

    <p>If you see the following error:
    <pre><code>A host only network interface you're attempting to configure via DHCP
already has a conflicting host only adapter with DHCP enabled. The
DHCP on this adapter is incompatible with the DHCP settings. Two
host only network interfaces are not allowed to overlap, and each
host only network interface can have only one DHCP server. Please
reconfigure your host only network or remove the virtual machine
using the other host only network.
    </code></pre>
    </p>

    <p>Here is the fix <code>VBoxManage dhcpserver remove --netname HostInterfaceNetworking-vboxnet0</code>
    You can read more about it [here](https://github.com/mitchellh/vagrant/issues/3083)</p>

</div>
